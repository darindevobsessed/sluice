---
timestamp: "2026-02-08 17:00:04"
story: "1-extraction-persistence"
chunk: "unknown"
tool: "Bash"
error: |
  Exit code 1

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.ts[2m [ src/hooks/__tests__/useExtraction.test.ts ][22m
[31m[1mError[22m: Transform failed with 1 error:
/Users/darindrobinski/dev/repos/gold-miner/src/hooks/__tests__/useExtraction.test.ts:28:25: ERROR: Unterminated regular expression[39m
  Plugin: [35mvite:esbuild[39m
  File: [36m/Users/darindrobinski/dev/repos/gold-miner/src/hooks/__tests__/useExtraction.test.ts[39m:28:25
[33m  
  Unterminated regular expression
  26 |      <ExtractionProvider>
  27 |        {children}
  28 |      </ExtractionProvider>
     |                           ^
  29 |    )
  30 |  }
  [39m
[90m [2mâ¯[22m failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:[2m1467:15[22m[39m
[90m [2mâ¯[22m node_modules/vite/node_modules/esbuild/lib/main.js:[2m736:50[22m[39m
[90m [2mâ¯[22m responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:[2m603:9[22m[39m
[90m [2mâ¯[22m handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:[2m658:12[22m[39m
[90m [2mâ¯[22m Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:[2m581:7[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m



> gold-miner@0.1.0 test
> vitest run src/hooks/__tests__/useExtraction.test.ts


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/darindrobinski/dev/repos/gold-miner[39m

 [31mâ¯[39m src/hooks/__tests__/useExtraction.test.ts [2m([22m[2m0 test[22m[2m)[22m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 17:00:02
[2m   Duration [22m 1.93s[2m (transform 30ms, setup 184ms, import 0ms, tests 0ms, environment 1.24s)[22m
---
timestamp: "2026-02-08 17:00:18"
story: "1-extraction-persistence"
chunk: "unknown"
tool: "Bash"
error: |
  Exit code 1

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.ts[2m [ src/hooks/__tests__/useExtraction.test.ts ][22m
[31m[1mError[22m: Transform failed with 1 error:
/Users/darindrobinski/dev/repos/gold-miner/src/hooks/__tests__/useExtraction.test.ts:28:25: ERROR: Unterminated regular expression[39m
  Plugin: [35mvite:esbuild[39m
  File: [36m/Users/darindrobinski/dev/repos/gold-miner/src/hooks/__tests__/useExtraction.test.ts[39m:28:25
[33m  
  Unterminated regular expression
  26 |      <ExtractionProvider>
  27 |        {children}
  28 |      </ExtractionProvider>
     |                           ^
  29 |    )
  30 |  }
  [39m
[90m [2mâ¯[22m failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:[2m1467:15[22m[39m
[90m [2mâ¯[22m node_modules/vite/node_modules/esbuild/lib/main.js:[2m736:50[22m[39m
[90m [2mâ¯[22m responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:[2m603:9[22m[39m
[90m [2mâ¯[22m handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:[2m658:12[22m[39m
[90m [2mâ¯[22m Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:[2m581:7[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m



> gold-miner@0.1.0 test
> vitest run src/hooks/__tests__/useExtraction.test.ts


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/darindrobinski/dev/repos/gold-miner[39m

 [31mâ¯[39m src/hooks/__tests__/useExtraction.test.ts [2m([22m[2m0 test[22m[2m)[22m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 17:00:17
[2m   Duration [22m 1.41s[2m (transform 32ms, setup 151ms, import 0ms, tests 0ms, environment 892ms)[22m
---
timestamp: "2026-02-08 17:00:39"
story: "1-extraction-persistence"
chunk: "unknown"
tool: "Bash"
error: |
  Exit code 1

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 8 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould initiate extraction and update state on text events
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m137:46[22m[39m
    [90m135| [39m
    [90m136| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m137| [39m        [34mexpect[39m(result[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                             [31m^[39m
    [90m138| [39m      })
    [90m139| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/8]â¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould update section statuses progressively as sections complete
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m180:46[22m[39m
    [90m178| [39m
    [90m179| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m180| [39m        [34mexpect[39m(result[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                             [31m^[39m
    [90m181| [39m      })
    [90m182| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/8]â¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould persist extraction on done event
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m236:46[22m[39m
    [90m234| [39m
    [90m235| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m236| [39m        [34mexpect[39m(result[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                             [31m^[39m
    [90m237| [39m      })
    [90m238| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/8]â¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould handle errors during extraction
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m295:46[22m[39m
    [90m293| [39m
    [90m294| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m295| [39m        [34mexpect[39m(result[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                

... [2714 characters truncated] ...

| [39m      })
    [90m411| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/8]â¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22medge cases[2m > [22mshould handle failed API persistence gracefully
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m455:46[22m[39m
    [90m453| [39m
    [90m454| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m455| [39m        [34mexpect[39m(result[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                             [31m^[39m
    [90m456| [39m      })
    [90m457| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/8]â¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mstore integration[2m > [22mshould return active store state when extraction is already running in global store
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m513:47[22m[39m
    [90m511| [39m
    [90m512| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m513| [39m        [34mexpect[39m(result1[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                              [31m^[39m
    [90m514| [39m      })
    [90m515| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/8]â¯[22m[39m



> gold-miner@0.1.0 test
> vitest run src/hooks/__tests__/useExtraction.test.tsx


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/darindrobinski/dev/repos/gold-miner[39m

 [31mâ¯[39m src/hooks/__tests__/useExtraction.test.tsx [2m([22m[2m12 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 8191[2mms[22m[39m
       [32mâœ“[39m should start in idle state with no existing data[32m 22[2mms[22m[39m
       [32mâœ“[39m should load existing extraction on mount[32m 54[2mms[22m[39m
[31m       [31mÃ—[31m should initiate extraction and update state on text events[39m[33m 1019[2mms[22m[39m
[31m       [31mÃ—[31m should update section statuses progressively as sections complete[39m[33m 1008[2mms[22m[39m
[31m       [31mÃ—[31m should persist extraction on done event[39m[33m 1004[2mms[22m[39m
[31m       [31mÃ—[31m should handle errors during extraction[39m[33m 1005[2mms[22m[39m
[31m       [31mÃ—[31m should handle cancel[39m[33m 1003[2mms[22m[39m
       [32mâœ“[39m should not extract when agent is null[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should not extract when already extracting[39m[33m 1006[2mms[22m[39m
[31m       [31mÃ—[31m should handle failed API persistence gracefully[39m[33m 1005[2mms[22m[39m
[31m       [31mÃ—[31m should return active store state when extraction is already running in global store[39m[33m 1005[2mms[22m[39m
       [32mâœ“[39m should fall back to API when store is empty[32m 54[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 17:00:29
[2m   Duration [22m 10.05s[2m (transform 139ms, setup 175ms, import 367ms, tests 8.19s, environment 882ms)[22m
---
timestamp: "2026-02-08 17:14:36"
story: "1-extraction-persistence"
chunk: "unknown"
tool: "Bash"
error: |
  Exit code 2
src/components/insights/InsightsTabs.tsx(3,58): error TS2307: Cannot find module '@/components/ui/tabs' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(4,32): error TS2307: Cannot find module '@/components/videos/TranscriptView' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(5,31): error TS6142: Module './InsightsPanel' was resolved to '/Users/darindrobinski/dev/repos/gold-miner/src/components/insights/InsightsPanel.tsx', but '--jsx' is not set.
src/components/insights/InsightsTabs.tsx(6,28): error TS2307: Cannot find module '@/components/video/RelatedTab' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(7,26): error TS2307: Cannot find module '@/lib/agent/AgentProvider' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(8,31): error TS2307: Cannot find module '@/hooks/useExtraction' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(9,28): error TS2307: Cannot find module '@/lib/db/schema' or its corresponding type declarations.
src/components/insights/InsightsTabs.tsx(37,5): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(38,7): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(39,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(40,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(41,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(44,7): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(45,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(51,7): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(52,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(64,7): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/components/insights/InsightsTabs.tsx(65,9): error TS17004: Cannot use JSX unless the '--jsx' flag is provided.
src/hooks/useExtraction.ts(4,36): error TS2307: Cannot find module '@/components/providers/ExtractionProvider' or its corresponding type declarations.
src/hooks/useExtraction.ts(5,39): error TS2307: Cannot find module '@/lib/claude/prompts/types' or its corresponding type declarations.
---
timestamp: "2026-02-08 17:23:50"
story: "1-extraction-persistence"
chunk: "unknown"
tool: "Bash"
error: |
  Exit code 1

[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/darindrobinski/dev/repos/gold-miner[39m

 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22minitial state[2m > [22mshould start in idle state with no existing data[32m 28[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22minitial state[2m > [22mshould load existing extraction on mount[32m 56[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould initiate extraction and update state on text events[32m 10[2mms[22m[39m
[90mstderr[2m | src/hooks/__tests__/useExtraction.test.tsx[2m > [22m[2museExtraction[2m > [22m[2mextraction flow[2m > [22m[2mshould persist extraction on done event
[22m[39mFailed to load existing extraction: TypeError: Cannot read properties of undefined (reading 'ok')
    at loadExisting [90m(/Users/darindrobinski/dev/repos/gold-miner/[39msrc/hooks/useExtraction.ts:74:18[90m)[39m

[90mstderr[2m | src/hooks/__tests__/useExtraction.test.tsx[2m > [22m[2museExtraction[2m > [22m[2medge cases[2m > [22m[2mshould handle failed API persistence gracefully
[22m[39mFailed to persist extraction: Error: Network error
    at [90m/Users/darindrobinski/dev/repos/gold-miner/[39msrc/hooks/__tests__/useExtraction.test.tsx:410:39
    at [90mfile:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///Users/darindrobinski/dev/repos/gold-miner/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould update section statuses progressively as sections complete[32m 8[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould persist extraction on done event[32m 16[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould handle errors during extraction[32m 6[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mextraction flow[2m > [22mshould handle cancel[32m 7[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22medge cases[2m > [22mshould not extract when already extracting[32m 5[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22medge cases[2m > [22mshould handle failed API persistence gracefully[32m 9[2mms[22m[39m
 [31mÃ—[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mstore integration[2m > [22mshould return active store state when extraction is already running in global store[33m 1028[2mms[22m[39m
[31m   â†’ expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
 [32mâœ“[39m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mstore integration[2m > [22mshould fall back to API when store is empty[32m 55[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/hooks/__tests__/useExtraction.test.tsx[2m > [22museExtraction[2m > [22mstore integration[2m > [22mshould return active store state when extraction is already running in global store
[31m[1mAssertionError[22m: expected 'idle' to be 'extracting' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"extracting"[39m
Received: [31m"idle"[39m

[36m [2mâ¯[22m src/hooks/__tests__/useExtraction.test.tsx:[2m502:47[22m[39m
    [90m500| [39m      [90m// Should immediately show extracting state from store[39m
    [90m501| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m502| [39m        [34mexpect[39m(result2[33m.[39mcurrent[33m.[39mstate[33m.[39moverall)[33m.[39m[34mtoBe[39m([32m'extracting'[39m)
    [90m   | [39m                                              [31m^[39m
    [90m503| [39m      })
    [90m504| [39m      [34mexpect[39m(result2[33m.[39mcurrent[33m.[39mstate[33m.[39msections[33m.[39msummary)[33m.[39m[34mtoBe[39m([32m'done'[39m)
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (11)[39m
[2m   Start at [22m 17:23:45
[2m   Duration [22m 4.98s[2m (transform 206ms, setup 420ms, import 623ms, tests 1.23s, environment 2.12s)[22m
