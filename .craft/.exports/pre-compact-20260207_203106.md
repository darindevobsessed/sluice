# Craft State Export (Pre-Compact)

This file was created automatically before context compaction.
Use this to restore state if needed.

## Global State
```bash
LAST_ACTIVITY="2026-02-08T02:27:17Z"
ACTIVE_CYCLE="experience"
CURRENT_STORY="2-discovery-following"
DEFAULT_MODE="creative"
BACKLOG_COUNT=1
HARNESS_CHECKED="2026-02-03"
HARNESS_VERSION="1.0"
CRAFT_WRITE_ENABLED="true"
PLANNING_CYCLE=""
RUN_MODE="cruise"
```

## Cycle State: Experience
```bash
CYCLE_NAME="experience"
CYCLE_STATUS="active"
CURRENT_STORY="2-discovery-following"
CURRENT_CHUNK="5"
TOTAL_CHUNKS="5"
LAST_VALIDATION="2026-02-08T02:24:11Z"
LAST_CHECKPOINT="2026-02-08T02:27:17Z"
TOUCHED_FILES="/Users/darindrobinski/dev/repos/gold-miner/src/lib/db/schema.ts /Users/darindrobinski/dev/repos/gold-miner/src/lib/db/__tests__/setup.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/providers/__tests__/FocusAreaProvider.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/providers/FocusAreaProvider.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/PageTitleContext.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/TopBar.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/PageTitleContext.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/TopBar.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/MainContent.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/layout.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/FocusAreaDropdown.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/FocusAreaDropdown.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/ManageFocusAreasModal.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/ManageFocusAreasModal.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/hooks/useSearch.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/search/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/video/FocusAreaAssignment.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/insights/InsightsTabs.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/videos/VideoGrid.tsx /Users/darindrobinski/dev/repos/gold-miner/src/lib/youtube/__tests__/channel-parser.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/lib/youtube/channel-parser.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/videos/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/videos/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/[id]/videos/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/lib/__tests__/time-utils.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/lib/time-utils.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/__tests__/DiscoveryVideoCard.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/DiscoveryVideoCard.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/__tests__/FollowChannelInput.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/FollowChannelInput.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/__tests__/ChannelSection.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/ChannelSection.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/discovery/layout.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/discovery/__tests__/page.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/discovery/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/hooks/__tests__/useLastVisited.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/hooks/useLastVisited.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/videos/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/channels/videos/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/__tests__/CatchUpSection.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/discovery/CatchUpSection.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/add-video/__tests__/AddVideoPage.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/add-video/AddVideoPage.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/add/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/ui/collapsible.tsx"
```

## Current Story
File: .craft/cycles/experience/stories/2-discovery-following.md

```markdown
---
name: discovery-following
title: Discovery & Following
status: active
priority: high
created: 2026-02-05
updated: 2026-02-07
cycle: experience
story_number: 2
chunks_total: 5
chunks_complete: 4
current_chunk: 5
---

# Story: Discovery & Following

## Spark

Build the discovery page as the command center for staying current. Two core sections: Catch-up (new content since last visit, chronological) and Following (channel management with video cards). Users paste a YouTube channel URL to follow a creator, see their latest videos in horizontal scroll cards, and can "Add to Bank" directly. Catch-up shows unread content since last visit.

Merges the backlog "Discovery Feed" story into a cohesive discovery experience.

> *"I wanna catch up. Give me a catch up page. Where I don't have to watch all the videos and just lets me read it like their news articles and, like, this is very important. You probably read this one, and it just gives me a catch up since the last time that I looked at the page."*

**Key decisions:**
- Catch-up: simple chronological ordering (newest first), not importance-ranked
- Track "last visited" timestamp (localStorage for MVP, can move to DB later)
- Channel following UI: paste URL, parse formats (@handle, /channel/, /c/), follow/unfollow
- Horizontal scroll cards per channel with "Add to Bank" / "In Bank" badges
- Reuse existing automation infrastructure (RSS parsing, delta detection, channels table)

## Visual Direction

**Vibe:** Dashboard Tiles
**Feel:** Consistent, visual-first, YouTube-familiar
**Inspiration:** YouTube's subscription feed, Apple TV+ browse

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Follow a Channel.....................] [+] â”‚
â”‚                                              â”‚
â”‚  â”€â”€ Catch Up (3 new) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸŸ¢thumb  â”‚ â”‚ ğŸŸ¢thumb  â”‚ â”‚  thumb   â”‚     â”‚
â”‚  â”‚ Title    â”‚ â”‚ Title    â”‚ â”‚ Title    â”‚     â”‚
â”‚  â”‚ @chan 2h â”‚ â”‚ @chan 5h â”‚ â”‚ @chan 1d â”‚     â”‚
â”‚  â”‚[Add Bank]â”‚ â”‚[âœ“ Bank] â”‚ â”‚[Add Bank]â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                              â”‚
```

## Recent Checkpoints
```
a4f8499 checkpoint: before chunk 5 â€” polish & animations
88bd008 checkpoint: before chunk 4 â€” add to bank integration & refresh
3e0d650 checkpoint: before chunk 3 â€” catch-up section & last visited tracking
49ff8e1 checkpoint: before chunk 2 â€” discovery page following section
d2d13c0 checkpoint: before chunk 1 â€” channel URL parser & follow API
884b4e1 feat: complete chunks 5-6 â€” focus area filtering, assignment UI, insights default & polish
706af41 checkpoint: before chunk 5 â€” knowledge bank filtering & video assignment
5c0b840 checkpoint: before chunk 5 â€” knowledge bank filtering & video assignment
27e7a28 checkpoint: before chunk 4 â€” manage focus areas modal
86ac920 checkpoint: before chunk 3 â€” focus area dropdown
```
