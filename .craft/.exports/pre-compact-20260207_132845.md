# Craft State Export (Pre-Compact)

This file was created automatically before context compaction.
Use this to restore state if needed.

## Global State
```bash
LAST_ACTIVITY="2026-02-07T19:28:39Z"
ACTIVE_CYCLE="experience"
CURRENT_STORY="1-ui-enhancements"
DEFAULT_MODE="creative"
BACKLOG_COUNT=1
HARNESS_CHECKED="2026-02-03"
HARNESS_VERSION="1.0"
CRAFT_WRITE_ENABLED="true"
PLANNING_CYCLE=""
RUN_MODE="cruise"
```

## Cycle State: Experience
```bash
CYCLE_NAME="experience"
CYCLE_STATUS="active"
CURRENT_STORY="1-ui-enhancements"
CURRENT_CHUNK="5"
TOTAL_CHUNKS="6"
LAST_VALIDATION="2026-02-07T19:28:39Z"
LAST_CHECKPOINT="2026-02-07T19:25:39Z"
TOUCHED_FILES="/Users/darindrobinski/dev/repos/gold-miner/src/lib/db/schema.ts /Users/darindrobinski/dev/repos/gold-miner/src/lib/db/__tests__/setup.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/providers/__tests__/FocusAreaProvider.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/providers/FocusAreaProvider.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/api/videos/[id]/focus-areas/__tests__/route.test.ts /Users/darindrobinski/dev/repos/gold-miner/src/app/api/focus-areas/[id]/route.ts /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/PageTitleContext.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/TopBar.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/PageTitleContext.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/TopBar.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/MainContent.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/layout.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/app/videos/[id]/page.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/FocusAreaDropdown.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/FocusAreaDropdown.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/__tests__/ManageFocusAreasModal.test.tsx /Users/darindrobinski/dev/repos/gold-miner/src/components/layout/ManageFocusAreasModal.tsx"
```

## Current Story
File: .craft/cycles/experience/stories/1-ui-enhancements.md

```markdown
---
name: ui-enhancements
title: UI Enhancements
status: active
priority: high
created: 2026-02-05
updated: 2026-02-07
cycle: experience
story_number: 1
chunks_total: 6
chunks_complete: 4
current_chunk: 5
---

# Story: UI Enhancements

## Spark

Improve the video detail page layout based on Brad's feedback. Make Insights the default tab â€” users want the extracted value first, raw transcript second. Add a global top bar with a focus area dropdown for filtering the entire knowledge bank experience.

> *"Put. Put insights before the transcript. I I like that the transcript's there. It's the first thing I wanna see. I wanna see insights."*
> *"So maybe then what I need is, like, a profile. Not a profile, but kinda like a yeah, almost like a profile selector. Instead of having within the knowledge bank having different categories, we just have, like, a root level category tab. That we can go through."*
> *"Like, focus areas, something like that."*

**Key decisions:**
- Insights tab becomes the default on video detail page (simple prop change)
- Focus areas live in a **global top bar** as a dropdown on the right side
- Focus areas are **user-defined** categories (not auto-extracted)
- "All" selected by default â€” filters Knowledge Bank + Search
- Selection persisted in localStorage
- "Manage Focus Areas" option in dropdown for CRUD operations

## Visual Direction

**Vibe:** Command Center
**Feel:** Structured, dashboard-like, purposeful
**Inspiration:** Notion's top bar with page title + breadcrumbs, Linear's workspace bar

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚  â”Œâ”€ top bar (h-14, bg-card) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  SIDEBAR â”‚  â”‚  ğŸ“Š Knowledge Bank    [All Areas â–¾] â”‚ â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚   Stats Â· Search Â· Video Grid             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Elements:**
- 56px top bar with `bg-card` background and bottom border
```

## Recent Checkpoints
```
5c0b840 checkpoint: before chunk 5 â€” knowledge bank filtering & video assignment
27e7a28 checkpoint: before chunk 4 â€” manage focus areas modal
86ac920 checkpoint: before chunk 3 â€” focus area dropdown
ab3153b checkpoint: before chunk 2 â€” global top bar shell
cf6312b checkpoint: before chunk 1 â€” ui-enhancements story
8b0aca7 chore: activate experience cycle, update craft state and story plans
3bedbaa fix: transcript auto-fetch â€” swap broken package, fix POST method, timestamps, and UI bugs
84181d0 story 4 complete: Automation pipeline
542bfe1 story 4, chunk 5: job processor and pipeline integration
dea19f8 checkpoint: before story 4, chunk 5
```
